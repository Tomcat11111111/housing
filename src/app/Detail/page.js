'use client';

import { Suspense, useEffect, useRef, useState } from 'react';

import { useQuery } from '@tanstack/react-query';
import axios from 'axios';
import Image from 'next/image';
import { useSearchParams } from 'next/navigation';
import { useRouter } from 'next/navigation';
import Script from 'next/script';
import { QRCodeCanvas } from 'qrcode.react';

import Button from '@/common/Button/Button';
import CardCarouselBox from '@/common/CardCarouselBox/CardCarouselBox';
import Map from '@/common/Map/Map';

import Footer from '@/layout/Footer/Footer';
import HeaderWithSearch from '@/layout/HeaderWithSearch/HeaderWithSearch';

import Input from '@/components/common/Input/Input';
import Tag from '@/components/common/Tag/Tag';
import Account from '@/components/icon/Account/Account';
import ArrowDropdownUp from '@/components/icon/ArrowDropdownUp/ArrowDropdownUp';
import Fire from '@/components/icon/Fire/Fire';
import Mail from '@/components/icon/Mail/Mail';
import Person from '@/components/icon/Person/Person';
import Phone from '@/components/icon/Phone/Phone';
import PhoneInTalk from '@/components/icon/PhoneInTalk/PhoneInTalk';
import Photo from '@/components/icon/Photo/Photo';
import Share from '@/components/icon/Share/Share';

import useSearchStore from '@/store/useSearchStore';

import { getPriceStatusInfo } from '@/utils/tools';

import ArrowDropdownDown from '@/icon/ArrowDropdownDown/ArrowDropdownDown';
import BookmarkHollowIcon from '@/icon/BookmarkHollowIcon/BookmarkHollowIcon';
import SmallArrow from '@/icon/SmallArrow/SmallArrow';

import styles from './Detail.module.scss';

export default function Detail() {
  const searchParams = useSearchParams();
  const router = useRouter();

  const { selectedTab, setSelectedTab } = useSearchStore();

  const [propertyId, setPropertyId] = useState('');
  const [cityId, setCityId] = useState({ id: 1, displayName: 'Âè∞ÂåóÂ∏Ç' });
  const [contactSwitch, setContactSwitch] = useState('book');
  const [collapse, setCollapse] = useState(true);
  const [gender, setGender] = useState('male');
  const [phone, setPhone] = useState('');
  const [mail, setMail] = useState('');
  const [name, setName] = useState('');
  const [search, setSearch] = useState('');

  const getDetailApi = async () => {
    const response = await axios.get(
      `https://jzj-api.zeabur.app/properties/${selectedTab === 'rent' ? 'for-rent' : 'for-sale'}/${propertyId}`
    );
    return response.data;
  };

  const { data: rentDetailData } = useQuery({
    queryKey: ['detail'],
    queryFn: getDetailApi,
    enabled: !!propertyId,
    initialData: { property: {} },
  });
  const {
    property = {},
    inclusions = [],
    material = {},
    offers = [],
    price = '',
    introduction = '',
    categoryStr = '',
    rentalOffersAndRules = [],
  } = rentDetailData;
  const [, equipments, rules] = rentalOffersAndRules;
  // console.log('üöÄ ~ Detail ~ rentDetailData:', rentDetailData);
  const {
    location = {},
    views,
    title,
    room,
    livingRoom,
    bathroom,
    balcony,
    squareMeters,
    floor,
    totalFloors,
    shape = {},
  } = property;

  const { city, district } = location;

  useEffect(() => {
    setPropertyId(searchParams.get('id'));
  }, [searchParams]);
  const priceStatusInfo = getPriceStatusInfo(25000, 15000);

  const getRecommendationsApi = async () => {
    const response = await axios.get(
      'https://jzj-api.zeabur.app/properties/for-rent?limit=4&offset=0&sort=-views' // ÂÖàÂØ´ÁßüÁöÑ
    );
    return response.data;
  };

  const formatCardData = (reponse) => {
    const { data = [] } = reponse;
    const formatData = data.map((item) => ({
      ...item.property,
      price: item.price,
    }));

    return formatData;
  };

  const { data: recommendationsList } = useQuery({
    queryKey: ['getRecommendationsData'],
    queryFn: getRecommendationsApi,
    select: formatCardData,
    initialData: [],
  });

  const mapRef = useRef(null);

  const initMap = () => {
    const TWlocation = { lat: 25.033, lng: 121.5654 };

    const map = new window.google.maps.Map(mapRef.current, {
      center: { lat: 25.033, lng: 121.5654 },
      zoom: 10,
    });

    const markerTW = new google.maps.Marker({
      position: TWlocation,
      map: map,
    });
  };

  useEffect(() => {
    if (typeof window !== 'undefined' && window.google && mapRef.current) {
      initMap();
    }
  });

  // const describeText = `üè†Âú∞ÂùÄÔºöÂ§ßÂÆâÂçÄÈÄöÂåñË°ó171Â∑∑XXËôü4Ê®ì
  // üè†Âª∫Áâ©ÂûãÊÖãÔºöÂÖ¨ÂØì
  // üè†Âù™Êï∏Ôºö15
  // üè†Ê†ºÂ±ÄÔºö2Êàø1Âª≥1Ë°õ1ÈôΩÂè∞
  // üè†ÁßüÈáëÔºö28000
  // üè†ÈõªÔºö5ÂÖÉ/Â∫¶
  // üè†ÁßüÈáëÂê´:Ê∞¥Ë≤ªÂèäÁ∂≤Ë∑Ø
  // ‚ùåÁ¶ÅÂØµ
  // üçÄÊúâÈõªÁ£ÅÁàêÊµÅÁêÜÂè∞
  // üçÄÁç®Á´ãÊ¥óË°£Ê©ü
  // üçÄÈôΩÂè∞ÂèØÊõ¨
  // üçÄÂÖ®ÂÆ§Ê∞£ÂØÜÁ™ó
  // üöá‰ø°Áæ©ÂÆâÂíåÁ´ô
  // ‚ùåüçÄüöáüè†
  // --------------------------------------------------
  // üî•ÂêåÂøÉ‰∏çÂãïÁî¢Â∞àÂì°ÈÇ±ÂÖàÁîü
  // üî•Âä†LINEÊà™ÂúñË©¢ÂïèÊúÉÊØîËºÉÂø´Âî∑
  // üëâÁßüÂ±ãÂ∞àÁ∑ö:‚òéÔ∏è0905258257
  // üëâLINE: @418hqlrk
  // ---------------------------------------------------
  // üî•ÁßíÊÆ∫Áâ©‰ª∂
  // ‚ú®ÈáãÂá∫Á®ÄÂ∞ë
  // ‚ú®ÊääÊè°Ê©üÊúÉüëçüî•Â∞àÊ•≠ÊääÈóú‚ú®ÊåëÈÅ∏Â±ãÊ≥Å‚ú®‰ΩèÁöÑÂÆâÂøÉüëçüí•Êàê‰∫§ÊôÇÊúÉÈÖåÊî∂‰∏ÄÊ¨°ÊÄßÊúçÂãôË≤ªüí•üî•Â§©Ê∞£Â•ΩÂ£ûÈÉΩË™†Âú∞ÁÇ∫ÊÇ®ÊúçÂãôüî•`;

  const textAreaRef = useRef(null);
  // console.log(textAreaRef.current?.clientHeight);

  // const [textAreaHeight, setTextAreaHeight] = useState(0);

  // useEffect(() => {
  //   if (textAreaHeight) return;

  //   setTextAreaHeight(textAreaRef.current?.clientHeight);
  // }, []);
  // console.log('üöÄ ~ useEffect ~ textAreaHeight:', textAreaHeight);

  return (
    <Suspense>
      <div className={styles.header}>
        <HeaderWithSearch
          headerType="white"
          city={cityId}
          onCityChange={(value) => setCityId(value)}
          padding="0 172px"
          selectedTab={selectedTab}
          onChange={(value) => {
            setSelectedTab(value);
            router.push('/Search');
          }}
          input={search}
          setInput={(value) => setSearch(value)}
        />
      </div>
      <div className={styles.body}>
        <nav className={styles.toolbar}>
          <div className={styles.breadcrumbContainer}>
            <span
              className={styles.breadcrumb}
              onClick={() => {
                router.push('/');
              }}
            >
              È¶ñÈ†Å
            </span>
            &gt;
            <span className={styles.breadcrumb}>
              {selectedTab === 'rent' ? 'ÁßüÊàø' : 'Ë≤∑Êàø'}
            </span>
            &gt;
            <span
              className={styles.breadcrumb}
              onClick={() => router.push('/Search')}
            >
              {city?.displayName}
            </span>
            &gt;
            <span
              className={styles.breadcrumb}
              onClick={() => router.push('/Search')}
            >
              {district?.displayName}
            </span>
            &gt;
            {categoryStr && (
              <>
                <span className={styles.breadcrumb}>{categoryStr}</span>&gt;
              </>
            )}
            <span className={styles.address}>{location?.address}</span>
          </div>
          <div className={styles.tool}>
            <div className={styles.browse}>
              <Tag
                text={`${views}‰∫∫ÁÄèË¶Ω`}
                icon={
                  <Image
                    src="/housing/icon/eye.svg"
                    alt="eye"
                    width={20}
                    height={20}
                  />
                }
                gap="4px"
                iconPosition="left"
              />
              |
              <Tag
                text="10Â∞èÊôÇÂÖßÊõ¥Êñ∞"
                icon={
                  <Image
                    src="/housing/icon/time.svg"
                    alt="time"
                    width={20}
                    height={20}
                  />
                }
                gap="4px"
                iconPosition="left"
              />
            </div>
            <div className={styles.btn}>
              <Button
                buttonText="ÂàÜ‰∫´"
                buttonType="transparent"
                iconPosition="left"
                icon={<Share />}
                textStyle={{
                  color: '#333',
                  fontSize: '14px',
                  lineHeight: '20px',
                }}
                buttonStyle={{
                  border: '1px solid #E9E9E9',
                  opacity: 0.6,
                  padding: '8px 16px 8px 16px',
                  gap: '8px',
                }}
              />
              <Button
                buttonText="Êî∂Ëóè"
                buttonType="transparent"
                iconPosition="left"
                icon={<BookmarkHollowIcon color="#333333" />}
                textStyle={{
                  color: '#333',
                  fontSize: '14px',
                  lineHeight: '20px',
                }}
                buttonStyle={{
                  border: '1px solid #E9E9E9',
                  opacity: 0.6,
                  padding: '8px 16px 8px 16px',
                  gap: '8px',
                }}
              />
            </div>
          </div>
        </nav>
        <figure className={styles.imgArea}>
          <div style={{ position: 'relative', width: '50%', height: '400px' }}>
            <Image
              style={{
                borderRadius: '16px 0 0 16px',
              }}
              src="/housing/image/ÈáëÊô∫ÂÇëÊàøÂ±ãÁ∂≤ image 7.png"
              alt={1}
              fill
            />
          </div>
          <div
            style={{
              display: 'flex',
              flexDirection: 'column',
              gap: '8px',
              flexGrow: 1,
            }}
          >
            <div
              style={{
                display: 'flex',
                gap: '8px',
              }}
            >
              <div
                style={{ position: 'relative', width: '50%', height: '196px' }}
              >
                <Image
                  src="/housing/image/ÈáëÊô∫ÂÇëÊàøÂ±ãÁ∂≤ image 8.png"
                  alt={1}
                  fill
                />
              </div>
              <div
                style={{ position: 'relative', width: '50%', height: '196px' }}
              >
                <Image
                  style={{
                    borderRadius: '0 16px 16px 0',
                  }}
                  src="/housing/image/ÈáëÊô∫ÂÇëÊàøÂ±ãÁ∂≤ image 9.png"
                  alt={1}
                  fill
                />
              </div>
            </div>
            <div style={{ display: 'flex', gap: '8px' }}>
              <div
                style={{ position: 'relative', width: '50%', height: '196px' }}
              >
                <Image
                  src="/housing/image/ÈáëÊô∫ÂÇëÊàøÂ±ãÁ∂≤ image 10.png"
                  alt={1}
                  fill
                />
              </div>
              <div
                style={{ position: 'relative', width: '50%', height: '196px' }}
              >
                <Image
                  style={{
                    borderRadius: '0 16px 16px 0',
                  }}
                  src="/housing/image/ÈáëÊô∫ÂÇëÊàøÂ±ãÁ∂≤ image 11.png"
                  alt={1}
                  fill
                />
              </div>
            </div>
          </div>
          <div className={styles.imgCount}>
            <Button
              buttonText="53+"
              textStyle={{
                color: '#FFF',
                fontSize: '16px',
                fontWeight: 700,
                lineHeight: '24px',
              }}
              buttonStyle={{
                borderRadius: '8px',
                opacity: 0.8,
                background: '#333',
                padding: '16px',
                gap: '8px',
              }}
              icon={<Photo />}
              iconPosition="left"
            />
          </div>
        </figure>
        <div className={styles.detail}>
          <article className={styles.detailContent}>
            <div className={styles.titleArea}>
              <span className={styles.title}>{title}</span>
              {/* TagÂçÄÂüü ÁúãÂæåÁ∫åË≥áÊñôÊÄéÈ∫ºÁµ¶
              <div className={styles.tags}>
                <Tag
                  text="Âê´Ëªä‰Ωç"
                  textStyle={{
                    color: '#FFFFFF',
                  }}
                  tagColor="#0936D8"
                  padding="4px 8px"
                />
                <Tag
                  text="ÊúâÈôΩÂè∞"
                  textStyle={{
                    color: '#FFFFFF',
                  }}
                  tagColor="#0936D8"
                  padding="4px 8px"
                />
                <Tag
                  text="‰ΩéÂÖ¨Ë®≠"
                  textStyle={{
                    color: '#FFFFFF',
                  }}
                  tagColor="#0936D8"
                  padding="4px 8px"
                />
                <Tag
                  text="ÊòéÊòüÂ≠∏ÂçÄ"
                  textStyle={{
                    color: '#FFFFFF',
                  }}
                  tagColor="#0936D8"
                  padding="4px 8px"
                />
              </div> */}
              <div className={styles.propertyInfo}>
                <div className={styles.propertyInfoGroup}>
                  <span className={styles.typeName}>È°ûÂûã</span>
                  <span className={styles.type}>{categoryStr}</span>
                </div>
                <div className={styles.propertyInfoGroup}>
                  <span className={styles.typeName}>Ê†ºÂ±Ä</span>
                  <span className={styles.type}>
                    {room} Êàø / {livingRoom} Âª≥ / {bathroom} Ë°õ / {balcony} ÈôΩÂè∞
                  </span>
                </div>
                <div className={styles.propertyInfoGroup}>
                  <span className={styles.typeName}>Âù™Êï∏</span>
                  <span className={styles.type}>{squareMeters} Âù™</span>
                </div>
                <div className={styles.propertyInfoGroup}>
                  <span className={styles.typeName}>Ê®ìÂ±§</span>
                  <span className={styles.type}>
                    {floor}F / {totalFloors}F
                  </span>
                </div>
                <div className={styles.propertyInfoGroup}>
                  <span className={styles.typeName}>ÂûãÊÖã</span>
                  <span className={styles.type}>{shape.displayName}</span>
                </div>
              </div>
            </div>
            <div className={styles.area}>
              <span className={styles.title}>‰ΩçÁΩÆÔºÜÂë®ÈÇä</span>
              <span className={styles.address}>
                <p className={styles.colon}>Âú∞ÂùÄÔºö</p>
                {location?.address}
              </span>
              <div className={styles.mapFill}>
                <Map />
              </div>
            </div>
            {selectedTab === 'rent' && (
              <div className={styles.area}>
                <span className={styles.title}>Ë®≠ÂÇôÔºÜË¶èÂâá</span>
                <div className={styles.infoArea}>
                  <span className={styles.infoType}>ÊàøÊù±Êèê‰æõ</span>
                  <div className={styles.infoGroup}>
                    <p className={styles.colon}>Ë®≠ÂÇôÔºö</p>
                    {offers.map((offer, index) => {
                      return (
                        <p key={`offer_${index}`} className={styles.info}>
                          {offer?.displayName}
                        </p>
                      );
                    })}
                  </div>
                  <div className={styles.infoGroup}>
                    <p className={styles.colon}>ÂÇ¢‰ø±Ôºö</p>
                    {/* {offers.map((offer, index) => {
                      return (
                        <p key={`offer_${index}`} className={styles.info}>
                          {offer.displayName}
                        </p>
                      );
                    })} */}
                  </div>
                </div>
                <div className={styles.infoArea}>
                  <span className={styles.infoType}>ÊàøÂ±ãË®≠ÂÇô</span>
                  {equipments?.content.map((item) => {
                    return (
                      <div className={styles.infoGroup} key={item?.subtitle}>
                        <p className={styles.colon}>{item?.subtitle}Ôºö</p>
                        <p className={styles.info}>{item?.description}</p>
                      </div>
                    );
                  })}
                  {/* <div className={styles.infoGroup}>
                    <p className={styles.colon}>Ëªä‰ΩçÔºö</p>
                    <p className={styles.info}>Ê©üÊ¢∞ÂºèËªä‰Ωç</p>
                  </div>
                  <div className={styles.infoGroup}>
                    <p className={styles.colon}>ÁÆ°ÁêÜÔºö</p>
                    <p className={styles.info}>ÁÆ°ÁêÜÂì°(Ë≠¶Ë°õ)</p>
                    <p className={styles.info}>$1200/Êúà</p>
                  </div> */}
                </div>
                <div className={styles.infoArea}>
                  <span className={styles.infoType}>ÁßüÂ±ãË¶èÂâá</span>
                  <div style={{ display: 'flex' }}>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÂèØÈÅ∑ÂÖ•Êó•Ôºö</p>
                        <p className={styles.info}>2024Âπ¥01Êúà15Êó•</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Áü≠ÊúüÁßüË≥ÉÔºö</p>
                        <p className={styles.info}>‰∏çÂèØ‰ª•</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Ë£ùÊΩ¢Á®ãÂ∫¶Ôºö</p>
                        <p className={styles.info}>‰∏≠Ê™îË£ùÊΩ¢</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÊäºÈáëÔºö</p>
                        <p className={styles.info}>ÂÖ©ÂÄãÊúàÁßüÈáë</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÈõªË≤ªÔºö</p>
                        <p className={styles.info}>5ÂÖÉ/Â∫¶</p>
                      </span>
                    </div>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÁßüÊúüÔºö</p>
                        <p className={styles.info}>1Âπ¥</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÊàøÊù±Âêå‰ΩèÔºö</p>
                        <p className={styles.info}>Âê¶</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÈñãÁÅ´Ôºö</p>
                        <p className={styles.info}>‰∏≠Ê™îË£ùÊΩ¢</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>È£ºÈ§äÂØµÁâ©Ôºö</p>
                        <p className={styles.info}>ÂÖ©ÂÄãÊúàÁßüÈáë</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÊÄßÂà•Ë¶ÅÊ±ÇÔºö</p>
                        <p className={styles.info}>ÊÄßÂà•‰∏çÈôê</p>
                      </span>
                    </div>
                  </div>
                  <div className={styles.infoGroup}>
                    <p className={styles.colon}>ÁßüÈáëÂÖßÂê´Ôºö</p>
                    {inclusions.map((include, index) => {
                      return (
                        <p key={`include_${index}`} className={styles.info}>
                          {include.displayName}
                        </p>
                      );
                    })}
                  </div>
                </div>
              </div>
            )}
            {selectedTab === 'buy' && (
              <div className={styles.area}>
                <span className={styles.title}>Áâ©‰ª∂‰ªãÁ¥π</span>
                <div className={styles.infoArea}>
                  <span className={styles.infoType}>ÊàøÂ±ãË≥áÊñô</span>
                  <div style={{ display: 'flex' }}>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÁèæÊ≥ÅÔºö</p>
                        <p className={styles.info}>Ëá™‰Ωè‰∏≠</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Ë£ùÊΩ¢Á®ãÂ∫¶Ôºö</p>
                        <p className={styles.info}>‰∏≠Ê™îË£ùÊΩ¢</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÂÖ¨Ë®≠ÊØîÔºö</p>
                        <p className={styles.info}>27%</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Ê≥ïÂÆöÁî®ÈÄîÔºö</p>
                        <p className={styles.info}>‰ΩèÂÆ∂Áî®</p>
                      </span>
                    </div>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÁÆ°ÁêÜË≤ªÔºö</p>
                        <p className={styles.info}>3799ÂÖÉ/Êúà</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Â∏∂ÁßüÁ¥ÑÔºö</p>
                        <p className={styles.info}>Âê¶</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Ëªä‰ΩçÔºö</p>
                        <p className={styles.info}>Âê¶</p>
                      </span>
                    </div>
                  </div>
                  <span className={styles.infoType}>Âù™Êï∏Ë™™Êòé</span>
                  <div style={{ display: 'flex' }}>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>Âª∫Áâ©ÁôªË®òÔºö</p>
                        <p className={styles.info}>15.51Âù™</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÈôÑÂ±¨Âª∫Áâ©Ôºö</p>
                        <p className={styles.info}>1.51Âù™</p>
                      </span>
                    </div>
                    <div className={styles.singleArea}>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>‰∏ªÂª∫Áâ©Ôºö</p>
                        <p className={styles.info}>7.28Âù™</p>
                      </span>
                      <span className={styles.singleInfo}>
                        <p className={styles.colon}>ÂÖ¨ÂÖ±Ë®≠ÊñΩÔºö</p>
                        <p className={styles.info}>6.72Âù™</p>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            )}
            <div className={styles.area}>
              <span className={styles.title}>Â±ãÊ≥Å‰ªãÁ¥π</span>
              <p
                className={styles.describe}
                data-collapse={
                  // textAreaHeight > 400 && collapse ? 'collapse' : ''
                  collapse ? 'collapse' : ''
                }
                dangerouslySetInnerHTML={{ __html: introduction }}
                ref={textAreaRef}
              ></p>
              {/* {textAreaHeight > 400 && ( */}
              <div
                style={{ position: 'relative' }}
                onClick={() => {
                  setCollapse(!collapse);
                }}
              >
                {collapse ? (
                  <div className={styles.collapseBtn}>
                    <p>Êü•ÁúãÂÖ®ÈÉ®</p>
                    <ArrowDropdownDown color="#909090" />
                  </div>
                ) : (
                  <div className={styles.collapseBtn}>
                    <p>Êî∂Ëµ∑‰ªãÁ¥π</p>
                    <ArrowDropdownUp color="#909090" />
                  </div>
                )}
                {collapse && <div className={styles.cover}></div>}
              </div>
              {/* )} */}
            </div>
          </article>
          <div className={styles.detailSideBar}>
            {price && (
              <div className={styles.price}>
                {price && <span>{price.toLocaleString()}/Êúà</span>}
                <Tag
                  text={priceStatusInfo?.text}
                  textStyle={{
                    color: '#F6F6F6',
                  }}
                  tagColor={priceStatusInfo?.color}
                  iconPosition="right"
                  icon={priceStatusInfo?.icon}
                  padding="8px 16px"
                  gap="4px"
                />
              </div>
            )}
            <div className={styles.contact}>
              <div className={styles.switchContainer}>
                <div
                  className={styles.switch}
                  onClick={() => {
                    setContactSwitch('book');
                  }}
                  data-selected={contactSwitch === 'book' ? 'selected' : ''}
                >
                  È†êÁ¥ÑÁúãÊàø
                </div>
                <div
                  className={styles.switch}
                  onClick={() => {
                    setContactSwitch('phone');
                  }}
                  data-selected={contactSwitch === 'phone' ? 'selected' : ''}
                >
                  Á´ãÂç≥ÂõûÈõª
                </div>
              </div>
              {contactSwitch === 'book' && (
                <div className={styles.book}>
                  <div className={styles.inputContainer}>
                    <div className={styles.genderButton}>
                      <Button
                        buttonText="ÂÖàÁîü"
                        buttonStyle={{
                          padding: '8px 16px',
                          background: gender === 'male' ? '#0936D8' : '',
                        }}
                        textStyle={{
                          color: gender === 'male' ? '#FFF' : '#CCC',
                        }}
                        action={() => setGender('male')}
                      />
                      <Button
                        buttonText="Â∞èÂßê"
                        buttonStyle={{
                          padding: '8px 16px',
                          background: gender === 'female' ? '#0936D8' : '',
                        }}
                        textStyle={{
                          color: gender === 'female' ? '#FFF' : '#CCC',
                        }}
                        action={() => setGender('female')}
                      />
                    </div>
                    <Input
                      placeholder="Â¶Ç‰ΩïÁ®±Âëº"
                      icon={<Person />}
                      iconPosition="left"
                      inputWidth="120px"
                      input={name}
                      onChange={(value) => setName(value)}
                    />
                  </div>
                  <div className={styles.inputContainer}>
                    <Input
                      placeholder="ËÅØÁµ°ÈõªË©±"
                      icon={<Phone />}
                      iconPosition="left"
                      input={phone}
                      onChange={(value) => setPhone(value)}
                    />
                  </div>
                  <div className={styles.inputContainer}>
                    <Input
                      placeholder="ËÅØÁµ°‰ø°ÁÆ±"
                      icon={<Mail />}
                      iconPosition="left"
                      input={mail}
                      onChange={(value) => setMail(value)}
                    />
                  </div>
                  <p className={styles.reminder}>
                    Áï∂ÊÇ®ÈÄÅÂá∫È†êÁ¥ÑË≥áË®äÂç≥‰ª£Ë°®ÊÇ®ÂêåÊÑè<a>ÊãìÊ®∏Áõ∏ÈóúÊ¢ù‰æã</a>
                    Ôºå‰∏¶ÂÖÅË®±Ë≥£ÂÆ∂ËàáÊÇ®ËÅØÁπ´
                  </p>
                </div>
              )}
              {contactSwitch === 'phone' && (
                <div className={styles.phone}>
                  <div className={styles.phoneInfo}>
                    <Account size={40} />
                    <span>ÁéãÂ∞èÊòé ÂÖàÁîü</span>
                  </div>
                  {contactSwitch === 'phone' && (
                    <div className={styles.qrcode}>
                      <QRCodeCanvas
                        value={'tel:0923776003'}
                        size={160} // Size of the QR code
                        bgColor={'#ffffff'} // Background color
                        fgColor={'#000000'} // Foreground color (QR code color)
                        level={'L'} // Error correction level ('L', 'M', 'Q', 'H')
                        includeMargin={false} // Add margin or not
                      />
                    </div>
                  )}
                </div>
              )}
              <Button
                buttonText={
                  contactSwitch === 'phone' ? '0937-059-940' : 'Á´ãÂç≥È†êÁ¥Ñ'
                }
                buttonStyle={{
                  borderRadius: '8px',
                  background: '#0936D8',
                  padding:
                    contactSwitch === 'book' ? '16px 128px' : '16px 84px',
                  gap: '8px',
                }}
                textStyle={{
                  color: '#FFF',
                  fontSize: '16px',
                  fontWeight: 700,
                  lineHeight: '24px',
                }}
                iconPosition={contactSwitch === 'phone' ? 'left' : ''}
                icon={<PhoneInTalk />}
                action={() => {
                  if (contactSwitch === 'phone') {
                    setQrcode(true);
                  }
                }}
              />
            </div>
            <div className={styles.view}>
              <Fire />
              <span>Ê≠§Áâ©‰ª∂ÂçÅÂàÜÊê∂Êâã</span>
              {views}‰∫∫ÁÄèË¶Ω
            </div>
          </div>
        </div>
      </div>
      <div className={styles.recommendBox}>
        <div className={styles.recommendArea}>
          <div className={styles.recommendTitle}>
            <span>ÁÜ±ÈñÄÁâ©‰ª∂</span>
            <Button
              buttonText="ÁÄèË¶ΩÊõ¥Â§ö"
              buttonType="transparent"
              iconPosition="right"
              icon={<SmallArrow />}
              textStyle={{
                color: '#333',
                fontSize: '14px',
                lineHeight: '20px',
              }}
              buttonStyle={{
                border: '1px solid #E9E9E9',
                opacity: 0.6,
                padding: '8px 8px 8px 16px',
                gap: '8px',
              }}
            />
          </div>
          <CardCarouselBox
            cardItemList={[...recommendationsList, ...recommendationsList]}
          />
        </div>
        <div className={styles.recommendArea}>
          <div className={styles.recommendTitle}>
            <span>ÁÜ±ÈñÄÁâ©‰ª∂</span>
            <Button
              buttonText="ÁÄèË¶ΩÊõ¥Â§ö"
              buttonType="transparent"
              iconPosition="right"
              icon={<SmallArrow />}
              textStyle={{
                color: '#333',
                fontSize: '14px',
                lineHeight: '20px',
              }}
              buttonStyle={{
                border: '1px solid #E9E9E9',
                opacity: 0.6,
                padding: '8px 8px 8px 16px',
                gap: '8px',
              }}
            />
          </div>
          <CardCarouselBox
            cardItemList={[...recommendationsList, ...recommendationsList]}
          />
        </div>
      </div>
      <Footer />
      <Script
        src={`https://maps.googleapis.com/maps/api/js?key=AIzaSyCudV7XzW3pXqAE-RljZ5JdGkOE8Dd-XQM&callback=initMap`}
        strategy="beforeInteractive"
      />
    </Suspense>
  );
}
